<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>prettyError</title>
  <link rel="stylesheet" href="prettyError.min.css" media="screen">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/atom-one-dark.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <style media="screen">
    #timeFadeOut {
      display: none;
    }
  </style>
</head>
<body>

  <pre class="snippet"><code class="html">
    <html>xoxo</html>
  </code></pre>
  <!-- Form for user options -->
  <div class="container">
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-sm-12 col-md-8">
        <h1>prettyError</h1>
        <form id="optionsForm">
          <fieldset class="form-group">
            <legend>Try settings</legend>
            <label for="fadeOutError">fadeOutError</label>
            <input class="form-control" type="checkbox" name="fadeOutError" id="fadeOutError">
            <div id="timeFadeOut">
              <label for="time">time fadeOutError</label>
              <input class="form-control" type="text" name="time" id="time">
            </div>
            <label for="elementError">elementError</label>
            <input class="form-control" type="text" name="elementError" id="elementError">
            <label for="positionMethod">positionMethod</label>
            <input class="form-control" type="text" name="positionMethod" id="positionMethod">
            <label for="focusErrorOnClick">focusErrorOnClick</label>
            <input class="form-control" type="checkbox" name="focusErrorOnClick" id="focusErrorOnClick">
          </fieldset>
          <input class="btn btn-outline-primary" type="submit" value="Submit">
        </form>
      </div>
    </div>
    <!-- First form example, only input['text'] -->
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-sm-12 col-md-8">
        <form class="prettyErrorForm">
          <fieldset class="form-group">
            <legend>Personal Details</legend>

            <label for="email">Email:</label>
            <input class="form-control" required type="email" id="email" name="email" placeholder="Your email" title="aa@aa.aa">

            <label>Telephone:</label>
            <input class="form-control" required type="tel" pattern='\d+' name="telephone" placeholder="Your telephone" title="Only digits">

            <label for="name">Name:</label>
            <input class="form-control" required type="text" id="name" name="name" placeholder="Your name">

            <label for="message">Message:</label>
            <textarea required class="form-control" type="text" id="message" name="message" placeholder="Your message"></textarea>
          </fieldset>
          <!-- /details -->
          <button type="submit" class="btn btn-outline-primary">Submit</button>
        </form>
      </div>
    </div>
    <!-- Second form example, other input types -->
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-sm-12 col-md-8">
        <form class="prettyErrorForm">
          <fieldset>
            <legend>Statistic Details</legend>

            <label for="gender">Select Gender</label>
              <!-- first value must be empty in order to get an error -->
              <select id="gender" required title="Select a Gender">
                <option value=""></option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>

            <p>Mac or PC?</p>

            <label for="mac">Mac:</label>
              <!-- input radio must have the same name attribute in order to be able to choose between them and get the error -->
              <input id="mac" type="radio" name="group1" value="mac" required class="form-control">

            <label for="pc">PC:</label>
              <input id="pc" type="radio" name="group1" value="pc" required class="form-control">


            <label for="terms">Terms and conditions</label>
              <input type="checkbox" id="terms" required title="Please agree with the conditions" class="form-control">

            <p>Best topping ever</p>

            <!-- Multiple required checkboxes give a problem when validates. Added extra javascript in order to use it, check jsVersion.js file -->

            <label for="pineapple">Pineapple:</label>
              <input required class="multiCheckbox" id="pineapple" type="checkbox" name="topping" value="pineapple" class="form-control">

            <!-- Added a class="options" for all same group of checkboxes -->
            <label for="ham">Ham:</label>
              <input required class="multiCheckbox" id="ham" type="checkbox" name="topping" value="ham" class="form-control">

            <label for="olives">Olives:</label>
              <input required class="multiCheckbox" id="olives" type="checkbox" name="olives" value="olives" class="form-control">

          </fieldset>
          <!-- /statistics -->
          <button type="submit" class="btn btn-outline-primary">Submit</button>
        </form>
      </div>
    </div>
  </div>
  <!-- Loading Scripts -->
  <script
  src="https://code.jquery.com/jquery-3.1.1.js"
  integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
  crossorigin="anonymous"></script>
  <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
  <script src="prettyError.min.js"></script>
  <script>
    $( document ).ready(function() {
      $( '#fadeOutError' ).on('change', function() {
        if ( $(event.currentTarget ).is( ':checked' )) {
         $( '#timeFadeOut').show();
       } else {
         $( '#timeFadeOut').hide();
       }
      })

      $( '#optionsForm' ).on( 'submit', function(event) {
        var userOptions = {};
        var oldOptions = $('.prettyErrorForm')
          .data( 'plugin_prettyError' )
          .options;

        event.preventDefault();

        // $.serializeArray returns form fields in format [{name: '', value: ''}]
        // filter the fields with data
        // prepare user options
        $( event.target )
          .serializeArray()
          .filter(function(formField) {
            return formField.value !== '';
          })
          .forEach( function(formField) {
            if (formField.value === 'on') {
              userOptions[formField['name']] = true;
              $("input[name="+ formField.name + "]").prop('checked', false);
            } else {
              userOptions[formField['name']] = formField.value;
              $("input[name="+ formField.name + "]").val("");
            }
          });

          // check if userOptions contains fadeOutError
          if (userOptions.hasOwnProperty('fadeOutError')) {
            var timeOption = userOptions['time'];
            var timeValue = isNaN(timeOption) ? timeOption : Number(timeOption);

            userOptions['fadeOutError'] = {
              fadeOut: true,
              fadeOutOpts: timeValue
            };
            delete userOptions['time'];
          }

          // extending previous options with submited ones
          $.extend(oldOptions, userOptions);
          $( '.prettyErrorForm' ).prettyError(userOptions);
      });
      var options = {
          multiCheckbox: {
            enabled: true,
            selector: '.multiCheckbox'
          }
        };
      $( '.prettyErrorForm' ).prettyError(options);
    });

  </script>
</body>
</html>
