{"version":3,"names":[],"mappings":"","sources":["prettyFormError.js"],"sourcesContent":["function _optionsConfig(r){var e,t=r||{},o=t.classError||\"prettyFormError\",n=t.callToAction||\"button\",i=t.elementError||\"div\",l=t.focusErrorOnClick||!0,c={fadeOut:!1,timer:0},a={enabled:!1,selector:\".multiCheckbox\"},u=t.fadeOutError||c,s=t.multiCheckbox||a;if(e=\"positionMethod\"in t?\"after\"===t.positionMethod?\"afterend\":\"beforebegin\":t.positionMethod=\"afterend\",isNaN(Number(u.timer))){var d=\"fadeOutError.timer options is not a number\";console.error(d),u.timer=6e3}else u.timer=Number(u.timer);return{classError:o,elementError:i,positionMethod:e,multiCheckbox:s,callToAction:n,focusErrorOnClick:l,fadeOutError:u}}function _getInvalidElems(r){var e=r.querySelectorAll(\":invalid:not(fieldset)\"),t=[];return[].forEach.call(e,function(r){r.validity.valid||t.push(r)}),t}function _changeHandler(r,e){var t=document.querySelectorAll(e+\":checked\").length;if(t>0)for(var o=0;o<r.length;o++)r[o].removeAttribute(\"required\");else for(var o=0;o<r.length;o++)r[o].setAttribute(\"required\",\"required\")}function _showErrorForInvalidSelector(r,e){if(0===r.length){var t=\"I couldn't fine any DOM element for the selector \\\"\"+e+'\"';console.warn(t)}}function PrettyFormErrorInstance(r,e){function t(r){if(r){var e=r.querySelectorAll(\".\"+l.classError);[].forEach.call(e,function(r){r.remove()})}}function o(r,e,t){var o=document.createElement(r);o.classList.add(l.classError),o.textContent=e.validationMessage,e.insertAdjacentElement(t,o)}function n(){return new MutationObserver(function(r){r.forEach(function(r){r.addedNodes.length>0&&r.addedNodes[0].classList.add(\"prettyFormError-fade\")})})}function i(r){var e=r.querySelector(l.callToAction);e&&e.addEventListener(\"click\",function(e){e.preventDefault();var i=_getInvalidElems(r);if(document.querySelector(\".\"+l.classError)&&t(r),[].forEach.call(i,function(r){o(l.elementError,r,l.positionMethod)}),l.focusErrorOnClick&&i.length>0&&i[0].focus(),l.fadeOutError.fadeOut){var c=n();const a={attributes:!0,childList:!0,characterData:!0};c.observe(r,a),setTimeout(function(){t(r)},l.fadeOutError.timer),0===i.length&&(c.disconnect(),c=null)}if(l.multiCheckbox.enabled){var u=l.multiCheckbox.selector,s=document.querySelectorAll(u);[].forEach.call(s,function(r){r.addEventListener(\"change\",function(){_changeHandler(s,u)})})}if(0===i.length){var d=r.querySelectorAll(\":valid\");[].forEach.call(d,function(r){r.value=\"\"}),r.submit()}})}this.options=_optionsConfig(e);var l=this.options;if(\"undefined\"==typeof jQuery){var c=document.querySelectorAll(r);_showErrorForInvalidSelector(c,r),[].forEach.call(c,function(r){i(r)})}else{var a=$(r);_showErrorForInvalidSelector(a,r),$.each(a,function(r,e){i(e)})}}function prettyFormError(r,e){return new PrettyFormErrorInstance(r,e)}\"undefined\"!=typeof jQuery&&($.fn.prettyFormError=function(r){var e=\"prettyFormError\",t=\"plugin_\"+e;return this.each(function(){$.data(this,t)||$.data(this,t,prettyFormError(this,r))})}),\"prettyFormError\"in window||(window.prettyFormError=prettyFormError),\"object\"==typeof module&&\"object\"==typeof module.exports&&(module.exports=prettyFormError);"],"file":"prettyFormError.min.js"}